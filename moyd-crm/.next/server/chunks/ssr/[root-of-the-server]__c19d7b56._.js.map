{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/moyd-crm/moyd-crm/src/components/Navigation.js"],"sourcesContent":["'use client'\n\nimport Link from 'next/link'\nimport { usePathname } from 'next/navigation'\nimport { MessageSquare, Users, BarChart3, MessageCircle } from 'lucide-react'\n\nexport default function Navigation() {\n  const pathname = usePathname()\n  \n  const links = [\n    { href: '/', label: 'Dashboard', icon: BarChart3 },\n    { href: '/members', label: 'Members', icon: Users },\n    { href: '/messenger', label: 'Messenger', icon: MessageSquare },\n    { href: '/conversations', label: 'Conversations', icon: MessageCircle },\n  ]\n  \n  return (\n    <nav className=\"bg-white border-b border-gray-200\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between h-16\">\n          <div className=\"flex\">\n            <div className=\"flex-shrink-0 flex items-center\">\n              <h1 className=\"text-xl font-bold text-blue-600\">MOYD CRM</h1>\n            </div>\n            <div className=\"hidden sm:ml-6 sm:flex sm:space-x-8\">\n              {links.map((link) => {\n                const Icon = link.icon\n                const isActive = pathname === link.href\n                return (\n                  <Link\n                    key={link.href}\n                    href={link.href}\n                    className={`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${\n                      isActive\n                        ? 'border-blue-500 text-gray-900'\n                        : 'border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700'\n                    }`}\n                  >\n                    <Icon className=\"mr-2 h-4 w-4\" />\n                    {link.label}\n                  </Link>\n                )\n              })}\n            </div>\n          </div>\n        </div>\n      </div>\n    </nav>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,WAAW,IAAA,iJAAW;IAE5B,MAAM,QAAQ;QACZ;YAAE,MAAM;YAAK,OAAO;YAAa,MAAM,+NAAS;QAAC;QACjD;YAAE,MAAM;YAAY,OAAO;YAAW,MAAM,6MAAK;QAAC;QAClD;YAAE,MAAM;YAAc,OAAO;YAAa,MAAM,yOAAa;QAAC;QAC9D;YAAE,MAAM;YAAkB,OAAO;YAAiB,MAAM,yOAAa;QAAC;KACvE;IAED,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAG,WAAU;0CAAkC;;;;;;;;;;;sCAElD,8OAAC;4BAAI,WAAU;sCACZ,MAAM,GAAG,CAAC,CAAC;gCACV,MAAM,OAAO,KAAK,IAAI;gCACtB,MAAM,WAAW,aAAa,KAAK,IAAI;gCACvC,qBACE,8OAAC,uKAAI;oCAEH,MAAM,KAAK,IAAI;oCACf,WAAW,CAAC,kEAAkE,EAC5E,WACI,kCACA,8EACJ;;sDAEF,8OAAC;4CAAK,WAAU;;;;;;wCACf,KAAK,KAAK;;mCATN,KAAK,IAAI;;;;;4BAYpB;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOd","debugId":null}},
    {"offset": {"line": 183, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/moyd-crm/moyd-crm/src/lib/supabase.js"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey)"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,uMAAY,EAAC,aAAa","debugId":null}},
    {"offset": {"line": 196, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/moyd-crm/moyd-crm/src/app/conversations/page.js"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport Navigation from '@/components/Navigation'\nimport { supabase } from '@/lib/supabase'\nimport { format } from 'date-fns'\nimport { MessageSquare, User, Clock, Filter } from 'lucide-react'\nimport Link from 'next/link'\n\nexport default function ConversationsPage() {\n  const [conversations, setConversations] = useState([])\n  const [loading, setLoading] = useState(true)\n  const [statusFilter, setStatusFilter] = useState('all')\n\n  useEffect(() => {\n    loadConversations()\n  }, [statusFilter])\n\n  async function loadConversations() {\n    setLoading(true)\n    try {\n      let query = supabase\n        .from('conversations')\n        .select(`\n          *,\n          member:members(id, name, phone, county),\n          messages(id, body, direction, created_at, read)\n        `)\n        .order('last_message_at', { ascending: false, nullsFirst: false })\n\n      if (statusFilter !== 'all') {\n        query = query.eq('status', statusFilter)\n      }\n\n      const { data, error } = await query\n\n      if (error) throw error\n\n      // Process conversations to add unread count\n      const processedConversations = data.map(conv => ({\n        ...conv,\n        unreadCount: conv.messages?.filter(\n          m => m.direction === 'inbound' && !m.read\n        ).length || 0,\n        lastMessage: conv.messages?.[conv.messages.length - 1]\n      }))\n\n      setConversations(processedConversations)\n    } catch (error) {\n      console.error('Error loading conversations:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Navigation />\n      \n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Header */}\n        <div className=\"mb-6 flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">Conversations</h1>\n            <p className=\"mt-1 text-sm text-gray-600\">\n              Manage all your member conversations\n            </p>\n          </div>\n          \n          {/* Status Filter */}\n          <div className=\"flex items-center space-x-2\">\n            <Filter className=\"h-5 w-5 text-gray-400\" />\n            <select\n              value={statusFilter}\n              onChange={(e) => setStatusFilter(e.target.value)}\n              className=\"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\n            >\n              <option value=\"all\">All Status</option>\n              <option value=\"active\">Active</option>\n              <option value=\"waiting\">Waiting</option>\n              <option value=\"resolved\">Resolved</option>\n              <option value=\"archived\">Archived</option>\n            </select>\n          </div>\n        </div>\n\n        {/* Conversations List */}\n        {loading ? (\n          <div className=\"text-center py-12\">\n            <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n            <p className=\"mt-2 text-gray-600\">Loading conversations...</p>\n          </div>\n        ) : conversations.length === 0 ? (\n          <div className=\"text-center py-12 bg-white rounded-lg shadow\">\n            <MessageSquare className=\"mx-auto h-12 w-12 text-gray-400\" />\n            <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No conversations</h3>\n            <p className=\"mt-1 text-sm text-gray-500\">\n              {statusFilter === 'all' \n                ? 'Get started by sending a message to a member'\n                : `No ${statusFilter} conversations found`}\n            </p>\n            <div className=\"mt-6\">\n              <Link\n                href=\"/messenger\"\n                className=\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"\n              >\n                <MessageSquare className=\"mr-2 h-5 w-5\" />\n                Send a Message\n              </Link>\n            </div>\n          </div>\n        ) : (\n          <div className=\"bg-white shadow overflow-hidden sm:rounded-lg\">\n            <ul className=\"divide-y divide-gray-200\">\n              {conversations.map((conversation) => (\n                <li key={conversation.id}>\n                  <Link\n                    href={`/messenger?conversation=${conversation.id}`}\n                    className=\"block hover:bg-gray-50 transition-colors\"\n                  >\n                    <div className=\"px-4 py-4 sm:px-6\">\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center min-w-0 flex-1\">\n                          <div className=\"flex-shrink-0\">\n                            <div className=\"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center\">\n                              <User className=\"h-6 w-6 text-blue-600\" />\n                            </div>\n                          </div>\n                          <div className=\"ml-4 flex-1 min-w-0\">\n                            <div className=\"flex items-center justify-between\">\n                              <p className=\"text-sm font-medium text-gray-900 truncate\">\n                                {conversation.member?.name || 'Unknown Member'}\n                              </p>\n                              {conversation.unreadCount > 0 && (\n                                <span className=\"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\n                                  {conversation.unreadCount} new\n                                </span>\n                              )}\n                            </div>\n                            <div className=\"mt-1 flex items-center text-sm text-gray-500\">\n                              <span className=\"truncate\">\n                                {conversation.member?.phone || 'No phone'}\n                              </span>\n                              {conversation.member?.county && (\n                                <>\n                                  <span className=\"mx-2\">â€¢</span>\n                                  <span>{conversation.member.county}</span>\n                                </>\n                              )}\n                            </div>\n                            {conversation.lastMessage && (\n                              <p className=\"mt-1 text-sm text-gray-600 truncate\">\n                                {conversation.lastMessage.direction === 'outbound' && 'You: '}\n                                {conversation.lastMessage.body}\n                              </p>\n                            )}\n                          </div>\n                        </div>\n                        <div className=\"ml-4 flex-shrink-0 flex items-center space-x-4\">\n                          <div className=\"text-right\">\n                            <div className=\"flex items-center text-sm text-gray-500\">\n                              <Clock className=\"mr-1 h-4 w-4\" />\n                              {conversation.last_message_at\n                                ? format(new Date(conversation.last_message_at), 'MMM d, h:mm a')\n                                : 'No messages'}\n                            </div>\n                            <span className={`mt-1 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n                              conversation.status === 'active' ? 'bg-green-100 text-green-800' :\n                              conversation.status === 'waiting' ? 'bg-yellow-100 text-yellow-800' :\n                              conversation.status === 'resolved' ? 'bg-gray-100 text-gray-800' :\n                              'bg-gray-100 text-gray-600'\n                            }`}>\n                              {conversation.status || 'unknown'}\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </Link>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}}]
}